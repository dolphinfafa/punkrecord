# Project Milestones

## 2026-02-04: Finance & Contract Module Enhancement

### 1. Architecture Refactor: Entity Unification
- **Migration**: Successfully migrated `FinanceAccount` ownership from `OurEntity` to `Counterparty`.
- **Database**: Updated `finance_account` table schema and migrated existing data.
- **Benefit**: Unified entity management, simplifying the relationship between internal/external entities and accounts.

### 2. Feature: Edit Functionality
- **Contracts**: Implemented "Edit" button in Contract List. Users can now modify existing contracts via a pre-filled modal.
- **Finance Accounts**: Implemented "Edit" button in Account List. Users can update account details (name, bank, default status).
- **Backend**: Added `PATCH /finance/accounts/{id}` endpoint and corresponding schemas.

### 3. Feature: Finance Module Optimization
- **Real-time Balance**: 
    - Added `initial_balance` field to accounts.
    - Implemented dynamic balance calculation: `Initial Balance + Sum(Income) - Sum(Expense)`.
    - Solved "Always 0" balance issue.
- **Transaction Management**:
    - Built `CreateTransactionModal` for recording Income/Expense.
    - Enhanced Transaction List to show "Account Name" instead of IDs.
    - Fixed "Record Transaction" button functionality.
- **Localization**:
    - Translated Finance Module (Accounts, Transactions) UI to Chinese.
    - Applied Chinese currency formatting (CNY) and status labels.
- **UX Improvements**:
    - Fixed "Set as default" checkbox alignment in Account Modal.

### 4. Cleanup
- Removed temporary migration scripts (`migrate_finance_balance.py`, `migrate_finance_entity.py`, etc.) to maintain codebase cleanliness.
