# Project Milestones

## 2026-02-18: äººåŠ›èµ„æºç»„ç»‡æ¶æ„å¢å¼ºä¸å¾…åŠäº‹é¡¹å®¡æ‰¹æµå®ç°

### 1. äººåŠ›èµ„æºç»„ç»‡æ¶æ„ (HR Organization Structure)

#### åŠŸèƒ½æè¿°
å®ç°äº†ä¸€å¥—å®Œæ•´çš„ç»„ç»‡æ¶æ„ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šçº§éƒ¨é—¨ã€èŒä½å®šä¹‰ä»¥åŠåŸºäºæ±‡æŠ¥é“¾çš„èŒçº§è‡ªåŠ¨è®¡ç®—ã€‚

#### åç«¯å®ç°
- **æ¨¡å‹ä¼˜åŒ–**: ä¸º `User` æ¨¡å‹æ–°å¢ `manager_user_id`, `job_title_id`, `department_id` å­—æ®µã€‚
- **èŒçº§è‡ªåŠ¨è®¡ç®—**: èˆå¼ƒäº†æ‰‹åŠ¨è®¾ç½®èŒçº§çš„æ–¹æ¡ˆï¼Œæ”¹ä¸ºæ ¹æ®æ±‡æŠ¥é“¾æ·±åº¦åŠ¨æ€è®¡ç®—ï¼ˆL0 ä¸ºé¡¶å±‚ï¼ŒL1 ä¸ºç›´æ¥ä¸‹çº§ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼Œå¹¶å®ç°äº†å¾ªç¯å¼•ç”¨ä¿æŠ¤ã€‚
- **API æ‰©å±•**: 
  - éƒ¨é—¨ï¼ˆOrgUnitï¼‰CRUD åŠæ ‘å½¢ç»“æ„æ¥å£ã€‚
  - èŒä½ï¼ˆJobTitleï¼‰CRUD æ¥å£ã€‚
  - ç»„ç»‡æ¶æ„å›¾å¯è§†åŒ–æ¥å£ã€‚
  - ç”¨æˆ·æ¥å£å¢å¼ºï¼Œæ”¯æŒè¿”å›å…³è”çš„éƒ¨é—¨å’ŒèŒä½åç§°ã€‚

#### å‰ç«¯å®ç°
- **IAM å¸ƒå±€æ›´æ–°**: å¢åŠ "éƒ¨é—¨ç®¡ç†"ã€"èŒä½ç®¡ç†"ã€"ç»„ç»‡æ¶æ„å›¾"ä¸‰ä¸ªå¯¼èˆªæ ‡ç­¾ã€‚
- **éƒ¨é—¨ç®¡ç†é¡µ**: æ”¯æŒæ— é™çº§éƒ¨é—¨æ ‘å½¢å±•ç¤ºã€æŠ˜å /å±•å¼€ã€æ–°å¢/ç¼–è¾‘/åˆ é™¤ã€‚
- **èŒä½ç®¡ç†é¡µ**: åˆ—è¡¨å±•ç¤ºåŠç®¡ç†ã€‚
- **ç”¨æˆ·ç®¡ç†é¡µ**: å¢å¼ºäººå‘˜ç¼–è¾‘å¼¹çª—ï¼Œæ”¯æŒé€‰æ‹©éƒ¨é—¨ã€èŒä½å’Œç›´å±ä¸Šçº§ã€‚
- **ç»„ç»‡æ¶æ„å›¾**: é€’å½’æ¸²æŸ“çš„ä¼ä¸šç»„ç»‡æ¶æ„æ ‘ï¼Œç›´è§‚å±•ç¤ºæ±‡æŠ¥å…³ç³»åŠèŒçº§ã€‚

---

### 2. å¾…åŠäº‹é¡¹ (Todo) åŠŸèƒ½å¢å¼º

#### åŠŸèƒ½æè¿°
å°†ç®€å•çš„å¾…åŠåˆ—è¡¨å‡çº§ä¸ºæ”¯æŒå›¢é˜Ÿåä½œå’Œå®¡æ‰¹æµç¨‹çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿã€‚

#### æ ¸å¿ƒæ”¹åŠ¨
1. **å›¢é˜Ÿä»»åŠ¡è§†è§’**: ç®¡ç†äººå‘˜å¯ä»¥åˆ‡æ¢åˆ°"å›¢é˜Ÿä»»åŠ¡"æ ‡ç­¾é¡µï¼ŒæŸ¥çœ‹æ‰€æœ‰ç›´å±ä¸‹å±ï¼ˆä¸å«ä¸‹çº§çš„ä¸‹çº§ï¼‰çš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µã€‚
2. **ä»»åŠ¡åˆ†é…ä¸é€šçŸ¥**: æ”¯æŒå‘åŒçº§æˆ–ä¸‹å±åˆ†é…ä»»åŠ¡ã€‚ä»»åŠ¡åˆ›å»ºåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘è¢«åˆ†é…äººçš„ä¸Šçº§å‘é€ç«™å†…é€šçŸ¥ã€‚
3. **ä¸¤é˜¶æ®µå®Œæˆæµç¨‹**:
   - **ä¸ŠæŠ¥å®Œæˆ**: å‘˜å·¥å®Œæˆä»»åŠ¡åç‚¹å‡»æäº¤ï¼ŒçŠ¶æ€è¿›å…¥ `pending_review`ï¼ˆä¸ŠæŠ¥å®Œæˆï¼‰ã€‚
   - **å®¡æ ¸æµ**: ä¸Šçº§åœ¨å›¢é˜Ÿä»»åŠ¡ä¸­å¯¹"å¾…å®¡æ ¸"ä»»åŠ¡è¿›è¡Œå¤„ç†ï¼Œå¯é€‰æ‹©"å®¡æ ¸é€šè¿‡"ï¼ˆè¿›å…¥ `done`ï¼‰æˆ–"é€€å›"ã€‚
   - **ä¿®æ”¹æ„è§**: ä¸Šçº§é€€å›ä»»åŠ¡æ—¶éœ€å¡«å†™ä¿®æ”¹æ„è§ï¼Œå‘˜å·¥åœ¨è¯¦æƒ…ä¸­å¯å®æ—¶æŸ¥çœ‹åé¦ˆã€‚

#### æŠ€æœ¯å®ç°
- **çŠ¶æ€æœºæ‰©å±•**: æ–°å¢ `pending_review` çŠ¶æ€ã€‚
- **API å¢å¼º**: æ–°å¢ `/todo/team`, `/todo/{id}/submit`, `/todo/{id}/approve`, `/todo/{id}/reject` ç­‰ç«¯ç‚¹ã€‚
- **å‰ç«¯äº¤äº’**: è¯¦æƒ…å¼¹çª—æ ¹æ®ç”¨æˆ·èº«ä»½ï¼ˆè´Ÿè´£äºº/ä¸Šçº§ï¼‰åŠ¨æ€å±•ç¤ºå®¡æ ¸æˆ–æäº¤æŒ‰é’®ã€‚

---

### 3. å…³é”® Bug ä¿®å¤ä¸æ•°æ®åº“è¿ç§»

#### æ•°æ®åº“è¿ç§» (SQLite)
- è§£å†³äº†ç”±äº `SQLModel.create_all()` ä¸æ”¯æŒ ALTER TABLE å¯¼è‡´çš„ç™»å½•å¤±è´¥é—®é¢˜ã€‚
- æ‰‹åŠ¨ç¼–å†™è¿ç§»è„šæœ¬ï¼Œå®‰å…¨åœ°ä¸º `user` å’Œ `org_unit` è¡¨æ·»åŠ æ–°å­—æ®µã€‚

#### çº¦æŸå†²çªä¿®å¤
- ä¿®å¤äº†é‡å»º `job_title` è¡¨æ—¶ç”±äº `level` å­—æ®µ NOT NULL çº¦æŸå¯¼è‡´çš„æ’å…¥å¤±è´¥æŠ¥é”™ã€‚
- æœ€ç»ˆæ–¹æ¡ˆå°† `level` å­—æ®µä»æ•°æ®åº“ä¸­ç§»é™¤ï¼Œæ”¹ä¸ºçº¯é€»è¾‘è®¡ç®—ã€‚

---

## ğŸ¯ æŠ€æœ¯è¦ç‚¹

### èŒçº§é€’å½’é€»è¾‘
```python
def _compute_level(user, user_map):
    level = 0
    current = user
    while current.manager_user_id:
        parent = user_map.get(current.manager_user_id)
        if not parent: break
        current = parent
        level += 1
    return level
```

### ä»»åŠ¡å®¡æ ¸æµçŠ¶æ€è¿ç§»
`Open/InProgress` --(å‘˜å·¥æäº¤)--> `Pending Review` --(ä¸Šçº§é€šè¿‡)--> `Done`
                                     â””--(ä¸Šçº§é€€å›)--> `Open` (é™„å¸¦ Comment)

---

## ğŸ“Š å½±å“èŒƒå›´

### æ–°å¢æ–‡ä»¶
- `frontend/src/pages/iam/DepartmentPage.jsx`
- `frontend/src/pages/iam/JobTitlePage.jsx`
- `frontend/src/pages/iam/OrgChartPage.jsx`
- `frontend/src/pages/iam/IAMPage.css`
- `backend/migrate_org.py` (è¿ç§»å·¥å…·)

### ä¿®æ”¹æ–‡ä»¶
- `backend/app/models/iam.py`, `backend/app/models/todo.py`
- `backend/app/api/iam.py`, `backend/app/api/todo.py`
- `frontend/src/pages/iam/UserListPage.jsx`
- `frontend/src/pages/todo/TodoPage.jsx`
- `frontend/src/components/todo/TodoModal.jsx`, `TodoDetailModal.jsx`

---

## ğŸ“ˆ å·¥ä½œç»Ÿè®¡

- **åŠŸèƒ½æ¨¡å—**: 2 ä¸ªï¼ˆHR ç»„ç»‡æ¶æ„ã€Todo å®¡æ‰¹æµï¼‰
- **ä¿®å¤ Bug**: 2 ä¸ªæ ¸å¿ƒæ•°æ®åº“å¼‚å¸¸
- **ä»£ç å˜åŠ¨**: çº¦ 1500+ è¡Œ
- **ä¸»è¦äº§å‡º**: ç»„ç»‡æ¶æ„å›¾ã€æ ‘å½¢éƒ¨é—¨ç®¡ç†ã€ä»»åŠ¡å®¡æ ¸å·¥ä½œæµ

---

**åˆ›å»ºæ—¶é—´**: 2026-02-18 23:10  
**åˆ›å»ºè€…**: AI Assistant (Antigravity)  
**é¡¹ç›®**: PunkRecord è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ
